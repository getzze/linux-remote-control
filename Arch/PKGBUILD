# $Id$
# Maintainer: getzze <getzze@gmail.com>

pkgname=linux-remote-control
pkgdesc="Turn any device into a complete remote control for your GNU/Linux."
pkgver=0.4
pkgrel=1
arch=('i686' 'x86_64')
url='http://www.linuxremotecontrol.com'
license=('GPL3')
depends=('nodejs' 'xdotool' 'xorg-xbacklight')
optdepends=('apache: http server')
source=('lrc::git+https://github.com/getzze/linux-remote-control.git#branch=archlinux'
        'lrc.service')
md5sums=('SKIP'
         '05dd1b6a2ecf28184c9342b5a23a5fbb')
options=(!emptydirs)

build() {
  cd "${srcdir}"
}

package() {
  cd "${srcdir}/lrc"
  mkdir -p "${pkgdir}"/opt/
  cp -R opt/lrc-client "${pkgdir}"/opt/.
  chown -R http:http "${pkgdir}"/opt/lrc-client
  cp -R opt/lrc-server "${pkgdir}"/opt/.

  mkdir -p "${pkgdir}/usr/lib/systemd/user/"
  install -Dm644 "${srcdir}"/lrc.service "${pkgdir}/usr/lib/systemd/user/"
  echo
  echo '------------------------------------------------------------------------------'
  echo '------------------------- WARNING --------------------------------------------'
  echo '------------------------------------------------------------------------------'
  echo '   Remember to enable the client in your http server.                         '
  echo '   For Apache:                                                                '
  echo '       cp /opt/lrc-client/apache.example.conf /etc/httpd/conf/extra/lrc.conf  '
  echo '   And include the line in /etc/httpd/conf/httpd.conf:                        '
  echo '       Include conf/extra/nextcloud.conf                                      '
  echo '                                                                              '
  echo '   Start the server with:                                                     '
  echo '       node /opt/lrc-server/lrc.js                                            '
  echo '   Or use the systemd service:                                                '
  echo '       systemctl --user start lrc                                                    '
  echo '------------------------------------------------------------------------------'
}


